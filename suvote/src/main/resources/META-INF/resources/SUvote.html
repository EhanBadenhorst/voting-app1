<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SU Vote | Vote</title>
  <link rel="stylesheet" href="CSS/su.css">
  <style>
    /* Small page-specific helpers ‚Äî won't conflict with your su.css */
    .vote-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:20px; margin-top:24px; }
    .vote-card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,0.06); text-align:center; transition:transform .18s ease; }
    .vote-card:hover { transform:translateY(-6px); }
    .candidate-photo { width:100%; height:160px; border-radius:8px; object-fit:cover; margin-bottom:12px; }
    .vote-actions { margin-top:12px; display:flex; gap:8px; justify-content:center; }
    .small-muted { font-size:0.9rem; color:#666; margin-top:8px; }
    /* Modal overrides for prototype */
    .modal.show { display:flex; }
    /* Chat preview on vote page */
    .results-preview { margin-top:20px; display:flex; gap:12px; align-items:center; justify-content:center; }
    .pill { background:linear-gradient(90deg,#61223b,#caa258); color:#fff; padding:8px 14px; border-radius:999px; font-weight:700; }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="logo"><h1>SU Vote</h1></div>
      <nav class="main-navigation">
        <ul>
          <li><a href="SUindex.html">Home</a></li>
          <li><a href="SUlogin.html">User</a></li>
          <li><a href="SUdashboard.html">Polls</a></li>
          <li><a href="SUprofilesettings.html">Settings</a></li>
          <li><a href="SUabout.html">Contact Us</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h2>Vote For You, You, and You</h2>
          <p>Choose your poll ‚Äî every vote helps decide the winner.</p>
          <div class="results-preview">
            <div class="pill">Prototype ‚Ä¢ Local-only</div>
            <a class="btn btn-secondary" href="SUresults.html" title="View live results">See live results</a>
          </div>
        </div>
      </div>
    </section>

    <section class="intro">
      <div class="container">
        <h2>Cast your vote</h2>
        <p>Select one of the options below and click <strong>Vote</strong>. This prototype saves votes locally in your browser (no backend).</p>

        <!-- Voting grid -->
        <div class="vote-grid" id="voteGrid">
          <!-- Cards are injected by JS -->
        </div>
      </div>
    </section>

    <section class="cta-section">
      <div class="container">
        <h2>Want to chat while results update?</h2>
        <p>Switch to the results page to see a live bar chart and a chat box demo.</p>
        <a href="SUresults.html" class="btn btn-primary">Open Results & Chat</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo"><h2>SU Vote</h2></div>
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="SUindex.html">Home</a></li>
            <li><a href="SUlogin.html">User</a></li>
            <li><a href="SUdashboard.html">Polls</a></li>
            <li><a href="SUprofilesettings.html">Settings</a></li>
            <li><a href="SUabout.html">Contact Us</a></li>
          </ul>
        </div>
        <div class="footer-contact">
          <h3>Contact Us</h3>
          <p>Hammanshand Rd, Stellenbosch Central, Stellenbosch, 7599</p>
          <p>Phone: 0218084367</p>
          <p>Email: ruanr@sun.ac.za</p>
        </div>
      </div>
      <div class="copyright"><p>&copy; 2025 SU. All rights reserved.</p></div>
    </div>
  </footer>

  <!-- Modal (confirmation) -->
  <div class="modal" id="confirmModal" style="display:none;justify-content:center;align-items:center;">
    <div class="modal-content" role="dialog" aria-modal="true">
      <span class="modal-close-btn" id="modalClose">&times;</span>
      <h3>Vote recorded</h3>
      <p id="modalText">Thanks ‚Äî your vote was added.</p>
      <div style="margin-top:20px;">
        <button class="btn btn-secondary" id="stayBtn">Stay on this page</button>
        <button class="btn btn-primary" id="goResultsBtn">Go to results</button>
      </div>
    </div>
  </div>

  <script>
 // --- Prototype data: change labels here if you like ---
const OPTIONS = [
  { 
    id: 'president', 
    title: 'Student Council President', 
    description: 'Vote for the next leader to represent and empower the student body.', 
    img: 'https://images.unsplash.com/photo-1607746882042-944635dfe10e?auto=format&fit=crop&w=800&q=60' 
  },
  { 
    id: 'event', 
    title: 'Event of the Month', 
    description: 'Select the most exciting and impactful event of this month on campus.', 
    img:  'https://images.unsplash.com/photo-1503376780353-7e6692767b70?auto=format&fit=crop&w=800&q=60'
  },
  { 
    id: 'lecturer', 
    title: 'Lecturer of the Year', 
    description: 'Recognize the lecturer who inspired you the most this academic year.', 
    img: 'https://images.unsplash.com/photo-1529101091764-c3526daf38fe?auto=format&fit=crop&w=800&q=60'
  }
];


  // ensure local storage structure exists
  function initVotes() {
    const raw = localStorage.getItem('su_votes');
    if (!raw) {
      const init = {};
      OPTIONS.forEach(o => init[o.id] = 0);
      localStorage.setItem('su_votes', JSON.stringify(init));
      return init;
    }
    try {
      const parsed = JSON.parse(raw);
      // ensure missing keys present
      OPTIONS.forEach(o => { if (!(o.id in parsed)) parsed[o.id] = 0; });
      localStorage.setItem('su_votes', JSON.stringify(parsed));
      return parsed;
    } catch(e) {
      const init = {};
      OPTIONS.forEach(o => init[o.id] = 0);
      localStorage.setItem('su_votes', JSON.stringify(init));
      return init;
    }
  }

  // render vote cards
  function renderCards() {
    const container = document.getElementById('voteGrid');
    container.innerHTML = '';
    OPTIONS.forEach(o => {
      const card = document.createElement('article');
      card.className = 'vote-card';
      card.innerHTML = `
        <img class="candidate-photo" src="${o.img}" alt="${o.title} photo" />
        <h3>${o.title}</h3>
        <p class="small-muted">${o.description}</p>
        <div class="vote-actions">
          <button class="btn btn-primary" data-id="${o.id}">Vote</button>
          <button class="btn btn-secondary" data-id="${o.id}" data-action="preview">Preview</button>
        </div>
      `;
      container.appendChild(card);
    });
  }

  // increment vote locally
  function castVote(optionId) {
    const votes = JSON.parse(localStorage.getItem('su_votes') || '{}');
    if (!(optionId in votes)) votes[optionId] = 0;
    votes[optionId] = votes[optionId] + 1;
    localStorage.setItem('su_votes', JSON.stringify(votes));
    // dispatch a custom event so other tabs/pages can optionally listen
    window.dispatchEvent(new Event('votes-updated'));
  }

  // modal helpers
  const modal = document.getElementById('confirmModal');
  const modalText = document.getElementById('modalText');
  const modalClose = document.getElementById('modalClose');
  const stayBtn = document.getElementById('stayBtn');
  const goResultsBtn = document.getElementById('goResultsBtn');

  function showModal(text) {
    modalText.textContent = text;
    modal.style.display = 'flex';
    modal.classList.add('show');
  }
  function hideModal() {
    modal.style.display = 'none';
    modal.classList.remove('show');
  }

  // Listen for vote clicks
  document.addEventListener('click', (ev) => {
    const btn = ev.target.closest('button');
    if (!btn) return;
    const id = btn.getAttribute('data-id');
    const action = btn.getAttribute('data-action');
    if (id && !action) {
      // Vote
      castVote(id);
      showModal('Thanks! Your vote was recorded locally.');
    } else if (id && action === 'preview') {
      // preview behavior ‚Äî simply show modal
      const opt = OPTIONS.find(o => o.id === id);
      showModal(`Preview: ${opt.title}\n\n${opt.description}`);
    }
  });

  modalClose.addEventListener('click', hideModal);
  stayBtn.addEventListener('click', hideModal);
  goResultsBtn.addEventListener('click', () => { window.location.href = 'SUresults.html'; });

  // initialize page
  document.addEventListener('DOMContentLoaded', () => {
    initVotes();
    renderCards();
  });

  // optional: handle storage events to reflect votes made in other tabs
  window.addEventListener('storage', (e) => {
    if (e.key === 'su_votes') {
      // we could update UI if needed; for prototype, no change required on vote page
      console.log('votes updated in another tab');
    }
  });
  </script>

<!-- Dark Mode Toggle Script -->
<script>
(function() {
  const toggleBtn = document.createElement('button');
  toggleBtn.id = 'darkModeToggle';
  toggleBtn.title = 'Toggle dark mode';
  toggleBtn.textContent = 'üåô';
  document.body.appendChild(toggleBtn);

  // Load user preference
  const isDark = localStorage.getItem('su_dark_mode') === 'true';
  if (isDark) {
    document.body.classList.add('dark-mode');
    toggleBtn.textContent = '‚òÄÔ∏è';
  }

  toggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    const darkActive = document.body.classList.contains('dark-mode');
    localStorage.setItem('su_dark_mode', darkActive);
    toggleBtn.textContent = darkActive ? '‚òÄÔ∏è' : 'üåô';
  });
})();
</script>

<!-- Language Toggle Script -->
<script>
(function() {
  const langBtn = document.createElement('button');
  langBtn.id = 'langToggle';
  langBtn.title = 'Change language';
  langBtn.textContent = 'EN';
  document.body.appendChild(langBtn);

  const translations = {
    'af': {
      'Vote For You, You, and You': 'Stem vir jouself, jouself, en jouself',
      'Choose your favourite event ‚Äî every vote helps decide the winner.':
        'Kies jou gunsteling gebeurtenis ‚Äî elke stem help om die wenner te bepaal.',
      'Cast your vote': 'Stem nou',
      'Student Council President': 'Studenteraadspresident',
      'Event of the Month': 'Geleentheid van die maand',
      'Lecturer of the Year': 'Dosent van die jaar',
      'Welcome to the chat! (simulated)': 'Welkom by die klets! (gesimuleer)',
      'I just voted ‚Äî go team!': 'Ek het pas gestem ‚Äî gaan span!'
    },
    'xh': {
      'Vote For You, You, and You': 'Votela Wena, Wena, noWena',
      'Choose your favourite event ‚Äî every vote helps decide the winner.':
        'Khetha umsitho owuthandayo ‚Äî ivoti ngalinye linceda ekugqibeleni ophumeleleyo.',
      'Cast your vote': 'Votela ngoku',
      'Student Council President': 'UMongameli weBhunga labafundi',
      'Event of the Month': 'Umnyhadala wenyanga',
      'Lecturer of the Year': 'Utitshala wonyaka',
      'Welcome to the chat! (simulated)': 'Wamkelekile kwincoko! (umzekelo)',
      'I just voted ‚Äî go team!': 'Ndivotele nje ‚Äî phambili iqela!'
    }
  };

  const langs = ['en', 'af', 'xh'];
  let currentLang = localStorage.getItem('su_language') || 'en';
  updateLanguage(currentLang);

  function cycleLanguage() {
    const idx = langs.indexOf(currentLang);
    currentLang = langs[(idx + 1) % langs.length];
    updateLanguage(currentLang);
    localStorage.setItem('su_language', currentLang);
  }

  langBtn.addEventListener('click', cycleLanguage);

  function updateLanguage(lang) {
    langBtn.textContent = lang.toUpperCase();

    if (lang === 'en') {
      // restore original text (reload or reverse translation)
      document.querySelectorAll('[data-original-text]').forEach(el => {
        el.textContent = el.getAttribute('data-original-text');
      });
      return;
    }

    // translate elements that have matching text content
    for (const [enText, translated] of Object.entries(translations[lang])) {
      document.querySelectorAll('*').forEach(el => {
        const txt = el.textContent.trim();
        if (txt === enText) {
          if (!el.hasAttribute('data-original-text')) {
            el.setAttribute('data-original-text', txt);
          }
          el.textContent = translated;
        }
      });
    }
  }
})();
</script>


</body>
</html>
